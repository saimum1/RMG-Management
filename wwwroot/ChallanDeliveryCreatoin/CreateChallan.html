<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Delivery Challan Management</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="./CreateChallan.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
   
</head>
<body>
    <!-- Loader Overlay -->
    <div class="loader-overlay" id="loaderOverlay">
        <div class="loader-container">
            <div class="spinner-border" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div class="loader-text" id="loaderText">Processing...</div>
        </div>
    </div>

    <div class="main-container">
        <div class="page-header">
            <h1><i class="fas fa-clipboard-list me-2"></i>Delivery Challan Management</h1>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-plus-circle me-2"></i>Create New Delivery Challan
            </div>
            <div class="card-body">
                <form id="deliveryChallanForm">
                    <input type="hidden" id="challanId" value="">

                    
                    
                    <div class="row g-3 mb-4">
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="to" value="Warehouse Manager" required>
                                <label for="to">TO</label> 
                            </div>
                        </div>


                         <div class="col-md-12">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="address" value="123 Main Street, City" required>
                                <label for="address">ADDRESS</label>
                            </div>
                        </div>
                        
                        <div class="col-md-6">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="challanNo" value="" disabled>
                                <label for="challanNo">CHALLAN NO</label>
                            </div>
                        </div>

                          <div class="col-md-6">
                            <div class="form-floating">
                                <input type="date" class="form-control" id="challanDate" value="" >
                                <label for="challanDate">DATE</label>
                            </div>
                        </div>


                       
                        
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <div class="input-group">
                                <div class="form-floating">
                                    <select class="form-select" id="existingTruckNo">
                                        <option value="">Select  truck</option>
                                        <!-- Trucks will be loaded from database here -->
                                    </select>
                                    <label for="existingTruckNo">TRUCK NO</label>
                                </div>
                                <button type="button" class="truck-icon-btn" data-bs-toggle="modal" data-bs-target="#truckModal" title="Manage Trucks">
                                    <i class="fas fa-truck"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="transportCompany" disabled value="">
                                <label for="transportCompany">TRANSPORT COMPANY</label>
                            </div>
                        </div>
                        <!-- <div class="col-md-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="hireTruckNo" placeholder="Insert new truck no.">
                                <label for="hireTruckNo">Hire Truck Number</label>
                            </div>
                        </div> -->
                        
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-4" style="display: none;">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="driverName" value="John Smith" required>
                                <label for="driverName">DRIVER NAME</label>
                            </div>
                        </div>
                        <div class="col-md-12">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="licenseNo" value="DL12345678" required>
                                <label for="licenseNo">LICENSE NO</label>
                            </div>
                        </div>
                        <div class="col-md-4" style="display: none;">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="mobileNo" value="9876543210" required>
                                <label for="mobileNo">MOBILE NO</label>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="date" class="form-control" id="inDate" value="2025-10-07" required>
                                <label for="inDate">IN DATE</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="time" class="form-control" id="inTime" value="19:06" required>
                                <label for="inTime">IN TIME</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="lockNo" value="LK456">
                                <label for="lockNo">LOCK NUMBER</label>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="date" class="form-control" id="outDate" value=""  disabled>
                                <label for="outDate">OUT DATE</label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="time" class="form-control" id="outTime" value=""  disabled>
                                <label for="outTime">OUT TIME</label>
                            </div>
                        </div>
                        <!-- <div class="col-md-4">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="rentedAmount" value="5000">
                                <label for="rentedAmount">Rented Amount</label>
                            </div>
                        </div> -->
                    </div>

                    <div class="row g-3 mb-4">
                        
                        <div class="col-md-3">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="truckCBM" value="100/150" required>
                                <label for="truckCBM">TRUCK CBM</label>
                            </div>
                        </div>

                         <div class="col-md-3">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="agdlCBM" value="" >
                                <label for="agdlCBM">AGDL CBM </label>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="depotName" value="Central Depot" required>
                                <label for="depotName">DEPOT NAME</label>
                            </div>
                        </div>

                        <div class="col-md-12">
                            <div class="form-floating">
                                <input type="text" class="form-control" id="descriptions" value="" required>
                                <label for="descriptions">DESCRIPTION GOODS</label>
                            </div>
                        </div>


                        <div class="col-md-6">
                            <div class="form-floating">
                                    <select class="form-select" id="unit">
                                        <option value="">Select unit</option>
                                        <option value="PKL001">PKL001</option>
                                        <option value="PKL001">PKL002</option>
                                        <option value="PKL001">PKL003</option>
                                    </select>
                                    <label for="unit">UNIT</label>
                                </div>
                        </div>

                        <div class="col-md-6"> 
                            <div class="form-floating">
                                <input type="number" class="form-control" id="quantity" value="" >
                                <label for="quantity">QUANTITY</label>
                            </div>
                        </div>

                        <div class="col-md-12"> 
                            <div class="form-floating">
                                <input type="text" class="form-control" id="remarks" value="" >
                                <label for="remarks">REMARKS</label>
                            </div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-end mt-4">
                        <button type="button" class="btn btn-primary" id="submitChallanBtn">
                            <i class="fas fa-save me-2"></i>Submit Challan
                        </button>
                    </div>
                </form>
            </div>
        </div>

        <div class="card">
            <div class="card-header">
                <i class="fas fa-list me-2"></i>Existing Delivery Challans
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-hover" id="challansTable">
                        <thead>
                            <tr>
                                <th>Challan No.</th>
                                <th>Truck No.</th>
                                <th>Recipient</th>
                                <th>In Date</th>
                                <th>Out Date</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Truck Modal -->
    <div class="modal fade" id="truckModal" tabindex="-1" aria-labelledby="truckModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="truckModalLabel">
                        <i class="fas fa-truck me-2"></i>Manage Trucks
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="d-flex justify-content-between align-items-center mb-3">
                        <h6 class="mb-0">Truck List</h6>
                        <div>
                            <button type="button" class="btn btn-success btn-sm me-2" id="addTruckRowBtn">
                                <i class="fas fa-plus me-1"></i> Add New Truck
                            </button>
                            <button type="button" class="btn btn-primary btn-sm" id="loadExistingTrucksBtn">
                                <i class="fas fa-sync me-1"></i> Load Existing Trucks
                            </button>
                        </div>
                    </div>
                    
                    <div class="truck-list-container">
                        <table class="table table-bordered truck-list-table" id="truckListTable">
                            <thead>
                                <tr>
                                    <th>Truck Number</th>
                                    <th>Truck License</th>
                                    <th>Transport Company</th>
                                    <th>Driver Name</th>
                                    <th>Driver License</th>
                                    <th>Driver Phone</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody id="truckTableBody">
                                <!-- Truck rows will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="text-center mt-3" id="emptyTruckMessage">
                        <p class="text-muted">No trucks added yet. Click "Add New Truck" to add a new truck or "Load Existing Trucks" to load existing ones.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveAllTrucksBtn">
                        <i class="fas fa-save me-2"></i>Save All Trucks
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap Modal for Confirmations -->
    <div class="modal fade" id="confirmationModal" tabindex="-1" aria-labelledby="confirmationModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmationModalLabel">Confirmation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="confirmationModalBody">
                    Are you sure you want to proceed?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="confirmButton">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="./CreateChallan.js" ></script>
 
 
</body>
</html>